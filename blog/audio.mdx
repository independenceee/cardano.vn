---
slug: mp3-player
title: mp3 player 
sidebar_label: mp3 player 
---

[Link  Sheet Data](https://docs.google.com/spreadsheets/d/1ghClpZ0iWfRuqQRhBBythqqLtIiMT92-zDineSyr7uk/edit#gid=0)

import AudioPlayer from 'react-h5-audio-player';
import 'react-h5-audio-player/lib/styles.css';
import { useState,useEffect } from 'react';
import { List } from 'antd';

export const Mp3Player = () => {
    const [playlist, setPlaylist] = useState([]);
    const [currentTrack, setTrackIndex] = useState(0);

    useEffect(() => {
        fetchSheetData();
    }, []);
    const fetchSheetData = async () => {
        try {
            const response = await fetch('https://sheets.googleapis.com/v4/spreadsheets/1ghClpZ0iWfRuqQRhBBythqqLtIiMT92-zDineSyr7uk/values/audio?key=AIzaSyBm44VZa9sLj5PpaWty_UCWzykTUbxy2js');
            const data = await response.json();
            const playlist = data.values.slice(1).map((row,rowIndex) =>
            {
            return ({
                    key: rowIndex.toString(),
                    date: row[0],
                    title: row[1],
                    link: row[2],
                    abstract:row[3]
                })
            });
            setPlaylist(playlist);
        } catch (error) {
            console.error('Error fetching data:', error);
        }
    };
    const handleClickNext = () => {
      console.log('click next')
        setTrackIndex((currentTrack) =>
            currentTrack < playlist.length - 1 ? currentTrack + 1 : 0
        );
    };
    const handleEnd = () => {
    console.log('end')
    setTrackIndex((currentTrack) =>
            currentTrack < playlist.length - 1 ? currentTrack + 1 : 0
        );
  }
  

if (playlist.length < 1 ) {
    return <div>Loading...</div>;
}
return (
    <div>
        <AudioPlayer
          volume="0.5"
          src={playlist[currentTrack].link}
          showSkipControls
          onClickNext={handleClickNext}
          onEnded={handleEnd}
          onError={()=> {console.log('play error')}}
          // Try other props!
        />
            <div className="playlist">
                <List
                    bordered
                    dataSource={playlist}
                    renderItem={(audio, index) => (
                        <List.Item 
                            style={index === currentTrack ? { backgroundColor: '#f0f0f0', fontWeight: 'bold' } : null} 
                            onClick={() => setTrackIndex(index)}
                        >
                            {audio.title}  - {audio.date}
                        
                        </List.Item>
                    )}
                />
            </div>
    </div>
);
}

<Mp3Player/>


